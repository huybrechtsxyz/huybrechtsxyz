# Documentation

The Huybrechts XYZ platform is an application by Vincent Huybrechts.

- Traefik for reverse proxy

- Consul for health and config

- PostgreSQL for SQL
- PGAdmin for SQL Admin

- Redis for Caching
- RedisInsight for Redis Admin

- Keycloak for IAM
  - Depends on: Postgres
  - Depends on: Postgress=init script for creating schema

---------------------------

WORKING DIRECTORIES FOR APP

---------------------------

## 📁 Application Folder Structure Overview

This application is deployed using Docker Swarm and consists of containerized services. Each service is defined declaratively and uses a standardized directory layout for configuration, data, and logs. The system automatically manages these paths based on service metadata.

## 🔧 Configuration Files

- **Path**: `/etc/app/{service}/`
- **Purpose**: Stores static configuration files for each service.
- **Managed by**: Configuration management tools or GitOps workflows.
- **Example**: `/etc/app/consul/config.json`

## 📦 Application Data

- **Path**: `/var/lib/app/{service}/`
- **Purpose**: Stores persistent service data (e.g., databases, state files).
- **Backed by**: `/sbd/var/lib/app/{service}/` via bind mounts.
- **Example**: `/var/lib/app/redis/dump.rdb`

## 🌐 Public or User-Facing Data

- **Path**: `/srv/app/{service}/`
- **Purpose**: Stores user-uploaded or served content (e.g., object storage blobs).
- **Used by**: Services like SeaweedFS or web servers.
- **Example**: `/srv/app/seaweedfs/data/`

## 🪵 Logs

- **Path**: `/var/log/app/{service}/`
- **Purpose**: Stores logs generated by each service.
- **Can be integrated with**: Centralized logging systems (e.g., Fluentd, Loki).
- **Example**: `/var/log/app/pgadmin/pgadmin.log`

## 💾 Disk Layout (Mounted from `/sbd`)

All persistent data is stored on a dedicated disk mounted at `/sbd`. The system uses bind mounts to map these to standard Linux paths:

- `/sbd/var/lib/app/{service}/` → `/var/lib/app/{service}/`
- `/sbd/srv/app/{service}/` → `/srv/app/{service}/`
- `/sbd/var/log/app/{service}/` → `/var/log/app/{service}/`
