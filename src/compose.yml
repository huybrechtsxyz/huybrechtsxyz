# https://docs.docker.com/compose/multiple-compose-files/extends/
# Docker Compose for the staging environment
version: '3.9'

networks:
  internet:
    external: true

volumes:
  appdata:
    driver: local
      driver_opts:
        type: 'none'
        o: 'bind'
        device: '/app/${APP_ENVIRONMENT}'

  certdata:
    driver: local
      driver_opts:
        type: 'none'
        o: 'bind'
        device: '/app/${APP_ENVIRONMENT}/cert'

  logdata:
    driver: local
      driver_opts:
        type: 'none'
        o: 'bind'
        device: '/app/${APP_ENVIRONMENT}/logs'

services:
  traefik:
    extends:
      file: traefik-compose.yml
      service: traefik
  
  # portainer-agent:
  #   extends:
  #     file: portainer-compose.yml
  #     service: portainer-agent

  # portainer-server:
  #   extends:
  #     file: portainer-compose.yml
  #     service: portainer-server
      
  # website:
  #   extends:
  #     file: website-compose.yml
  #     service: website